--- a/src/core/lv_refr.c
+++ b/src/core/lv_refr.c
@@ -839,7 +839,7 @@
  * Reshape the draw buffer if required
  * @param layer  pointer to a layer which will be drawn
  */
-static void layer_reshape_draw_buf(lv_layer_t * layer, uint32_t stride)
+static bool layer_reshape_draw_buf(lv_layer_t * layer, uint32_t stride)
 {
     lv_draw_buf_t * ret = lv_draw_buf_reshape(
                               layer->draw_buf,
@@ -849,6 +849,13 @@
                               stride);
     LV_UNUSED(ret);
     LV_ASSERT_NULL(ret);
+    if(ret == NULL) {
+        LV_LOG_ERROR("draw_buf reshape failed for %dx%d stride %u - skipping render",
+                     (int)lv_area_get_width(&layer->buf_area),
+                     (int)lv_area_get_height(&layer->buf_area), stride);
+        return false;
+    }
+    return true;
 }
 
 /**
@@ -868,7 +875,11 @@
     if(disp_refr->render_mode == LV_DISPLAY_RENDER_MODE_PARTIAL) {
         /*In partial mode render this area to the buffer*/
         layer->buf_area = *area_p;
-        layer_reshape_draw_buf(layer, LV_STRIDE_AUTO);
+        if(!layer_reshape_draw_buf(layer, LV_STRIDE_AUTO)) {
+            disp_refr->refreshed_area = *area_p;
+            LV_PROFILER_REFR_END;
+            return;
+        }
     }
     else if(disp_refr->render_mode == LV_DISPLAY_RENDER_MODE_DIRECT ||
             disp_refr->render_mode == LV_DISPLAY_RENDER_MODE_FULL) {
@@ -883,7 +894,11 @@
             layer->buf_area.x2 = lv_display_get_horizontal_resolution(disp_refr) - 1;
             layer->buf_area.y2 = lv_display_get_vertical_resolution(disp_refr) - 1;
         }
-        layer_reshape_draw_buf(layer, disp_refr->stride_is_auto ? LV_STRIDE_AUTO : layer->draw_buf->header.stride);
+        if(!layer_reshape_draw_buf(layer, disp_refr->stride_is_auto ? LV_STRIDE_AUTO : layer->draw_buf->header.stride)) {
+            disp_refr->refreshed_area = *area_p;
+            LV_PROFILER_REFR_END;
+            return;
+        }
     }
 
     /*Try to divide the area to smaller tiles*/
