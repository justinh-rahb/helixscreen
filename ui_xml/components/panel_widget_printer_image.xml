<?xml version="1.0"?>
<!-- Copyright (C) 2025-2026 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<component>
  <styles>
    <!-- Dimmed image when printer is not connected (state 0 or 1) -->
    <style name="image_dimmed" image_opa="128"/>
  </styles>
  <view extends="lv_obj"
        width="100%" height="100%" style_pad_all="0" style_pad_gap="0"
        style_bg_opa="0%" flex_flow="column" scrollable="false">
    <!-- Printer image container -->
    <lv_obj name="printer_container"
            width="100%" flex_grow="1" style_bg_color="#screen_bg" style_pad_all="0"
            scrollable="false" align="center" flex_flow="row" clickable="true">
      <event_cb trigger="clicked" callback="printer_manager_clicked_cb"/>
      <lv_image name="printer_image" width="100%" height="100%" align="center" inner_align="contain">
        <!-- Dim image when disconnected (state 0) or connecting (state 1) -->
        <bind_style name="image_dimmed" subject="printer_connection_state" ref_value="0"/>
        <bind_style name="image_dimmed" subject="printer_connection_state" ref_value="1"/>
        <!-- Dim image when klippy is in SHUTDOWN (state 2) or ERROR (state 3) -->
        <bind_style name="image_dimmed" subject="klippy_state" ref_value="2"/>
        <bind_style name="image_dimmed" subject="klippy_state" ref_value="3"/>
      </lv_image>
      <!-- Disconnected overlay - shown when NOT connected (state != 2) -->
      <icon name="disconnected_overlay" src="prohibited" size="xl" align="center" variant="danger">
        <bind_flag_if_eq subject="printer_connection_state" flag="hidden" ref_value="2"/>
      </icon>
      <!-- Shutdown overlay - shown when klippy is SHUTDOWN (state 2) -->
      <icon name="shutdown_overlay" src="alert_octagon" size="xl" align="center" variant="warning" hidden="true">
        <bind_flag_if_not_eq subject="klippy_state" flag="hidden" ref_value="2"/>
      </icon>
    </lv_obj>

    <!-- Printer info - subtle text at bottom -->
    <lv_obj name="printer_info_bar" width="100%" style_pad_all="0">
      <bind_flag_if_eq subject="printer_info_visible" flag="hidden" ref_value="0"/>
      <text_small width="100%"
                  height="content" bind_text="printer_type_text" style_text_color="#text" style_text_align="center"
                  stroke_width="1" stroke_color="#screen_bg" stroke_opa="180"/>
    </lv_obj>
  </view>
</component>
