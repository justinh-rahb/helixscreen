<?xml version="1.0"?>
<!-- Copyright (C) 2025-2026 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<component>
  <view extends="ui_card" width="100%" height="100%">
    <bind_state_if_not_eq subject="printer_connection_state" state="disabled" ref_value="2"/>
    <event_cb trigger="clicked" callback="print_card_clicked_cb"/>
    <!-- IDLE STATE: Benchy + "Print Files" (hidden when print_active == 1) -->
    <lv_obj name="print_card_idle"
            width="100%" height="100%" style_pad_all="0" flex_flow="row" style_flex_main_place="center"
            style_flex_cross_place="center" style_pad_gap="#space_sm" clickable="false">
      <bind_flag_if_not_eq subject="print_active" flag="hidden" ref_value="0"/>
      <lv_image name="print_card_thumb"
                width="50%" height="100%" src="A:assets/images/benchy_thumbnail_white.png" inner_align="contain"/>
      <text_body name="print_card_label" text="Print Files" translation_tag="Print Files"/>
    </lv_obj>
    <!-- PREPARING STATE: Progress + message (hidden when print_start_phase == 0/IDLE) -->
    <lv_obj name="print_card_preparing"
            width="100%" height="100%" style_pad_all="#space_sm" flex_flow="column" style_flex_main_place="center"
            style_flex_cross_place="center" style_pad_gap="#space_sm" hidden="true" clickable="false">
      <bind_flag_if_eq subject="print_start_phase" flag="hidden" ref_value="0"/>
      <text_body text="Preparing Print" translation_tag="Preparing Print"/>
      <progress_bar name="print_start_bar" width="90%" bind_value="print_start_progress"/>
      <text_small bind_text="print_start_message"/>
      <text_small name="print_start_eta" bind_text="print_start_time_left" style_text_color="#text_muted"/>
    </lv_obj>
    <!-- PRINTING STATE: Actual print progress (hidden when print_show_progress==0) -->
    <lv_obj name="print_card_printing"
            width="100%" height="100%" style_pad_all="#space_sm" flex_flow="column" style_pad_gap="#space_xs"
            scrollable="false" hidden="true" clickable="false">
      <bind_flag_if_eq subject="print_show_progress" flag="hidden" ref_value="0"/>
      <lv_obj width="100%"
              flex_grow="1" style_pad_all="0" flex_flow="row" style_flex_cross_place="center"
              style_pad_gap="#space_sm" scrollable="false" clickable="false">
        <lv_obj width="40%" height="100%" style_pad_all="0" style_bg_opa="0%" scrollable="false" clickable="false">
          <lv_image name="print_card_active_thumb"
                    width="100%" height="100%" src="A:assets/images/benchy_thumbnail_white.png"
                    inner_align="contain"/>
        </lv_obj>
        <lv_obj height="100%"
                flex_grow="1" style_pad_all="0" flex_flow="column" style_flex_main_place="center"
                style_flex_cross_place="center" style_pad_gap="#space_xs" scrollable="false" clickable="false">
          <ui_button name="estop_button_print"
                     width="#button_height_sm" height="#button_height_sm" variant="danger" style_radius="24"
                     focusable="false" hidden="true">
            <bind_flag_if_eq subject="estop_visible" flag="hidden" ref_value="0"/>
            <icon src="alert_octagon" size="sm" variant="text" align="center"/>
            <event_cb trigger="clicked" callback="emergency_stop_clicked"/>
          </ui_button>
          <text_small width="100%"
                      bind_text="print_display_filename" style_text_color="#text" long_mode="wrap"
                      style_text_align="center"/>
          <progress_bar name="print_progress_bar" width="90%" bind_value="print_progress"/>
          <text_small bind_text="print_progress_text"/>
        </lv_obj>
      </lv_obj>
      <text_small name="display_message"
                  width="100%" bind_text="display_message" variant="muted" style_text_align="center" long_mode="dots"
                  hidden="true">
        <bind_flag_if_eq subject="display_message_visible" flag="hidden" ref_value="0"/>
      </text_small>
    </lv_obj>
  </view>
</component>
