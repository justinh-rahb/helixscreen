#!/bin/bash
# SPDX-License-Identifier: GPL-3.0-or-later
# Git pre-commit hook for HelixScreen
#
# This hook runs quality checks before each commit using scripts/quality-checks.sh
# Files with formatting issues are auto-fixed and staged.
#
# Setup (one-time):
#   git config core.hooksPath .githooks
#
# Bypass for one commit:
#   git commit --no-verify

set -e

# Change to repo root
REPO_ROOT="$(git rev-parse --show-toplevel 2>/dev/null || pwd)"
cd "$REPO_ROOT"

# Run quality checks with staged-only mode and auto-fix
exec ./scripts/quality-checks.sh --staged-only --auto-fix
